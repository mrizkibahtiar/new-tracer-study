<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description">
    <meta content="coderthemes" name="author">

    <!-- App favicon -->
    <link rel="shortcut icon" href="/../assets/admin/smk-bp.png">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=mail" />

    <!-- Main Css -->
    <link href="/../assets/admin/libs/simplebar/simplebar.min.css" rel="stylesheet">
    <link href="/../assets/admin/libs/%40mdi/font/css/materialdesignicons.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/../assets/admin/css/tailwind.min.css">

    <style>
        @media (min-width: 768px) {
            .profile {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
        }

        .grid-container {
            display: grid;
            gap: 1.5rem;
            /* Tetap berikan gap untuk layout mobile */
        }

        .top-header {
            background-color: white;
            padding: 10px 20px;
            border-bottom: 1px solid #ddd;
        }

        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-container img {
            vertical-align: middle;
        }
    </style>
</head>

<body>
    <div class="page-wrapper toggled">
        <!-- Start Page Content -->
        <main class="bg-gray-50 dark:bg-slate-800" style="height: 1000px; padding-top: 6rem; padding-bottom: 2rem;">
            <div class="top-header" style="position: fixed; z-index: 999; top: 0; right: 0; left: 0;">
                <div class=" header-bar flex justify-between">
                    <div class="flex items-center space-x-1">
                        <a href="#" class="block me-2">
                            <img src="/../assets/admin/images/smk-bp.png" class="md:hidden block" alt="" width="40px">
                            <span class="hidden md:block">
                                <img src="/../assets/admin/images/logo-dark.png" class="inline-block dark:hidden" alt=""
                                    width="200px">
                                <img src="/../assets/admin/images/logo-light.png" class="hidden dark:inline-block"
                                    alt="" width="200px">
                            </span>
                        </a>
                    </div>

                    <ul class="list-none mb-0 space-x-1">
                        <li class="dropdown inline-block relative">
                            <button data-dropdown-toggle="dropdown" class="dropdown-toggle items-center" type="button">
                                <span
                                    class="size-10 inline-flex items-center justify-center tracking-wide align-middle duration-500 text-[20px] text-center bg-gray-50 dark:bg-slate-800 hover:bg-gray-100 dark:hover:bg-slate-700 border border-black dark:border-gray-800 text-slate-900 dark:text-white rounded-md"><img
                                        src="/../assets/admin/images/profile-icon-light.png" class="rounded-md w-full"
                                        alt="" style="cursor: pointer;"></span>
                            </button>
                            <div class="dropdown-menu absolute end-0 m-0 mt-4 z-10 w-44 rounded-md overflow-hidden bg-white dark:bg-slate-900 shadow-sm dark:shadow-gray-700 hidden"
                                onclick="event.stopPropagation();">
                                <ul class="py-2 text-start">
                                    <li>
                                        <a href="/alumni/profile"
                                            class="block py-1 px-4 dark:text-white/70 hover:text-green-600 dark:hover:text-white"><i
                                                class="mdi mdi-account-outline me-2"></i>Profile</a>
                                    </li>
                                    <li class="border-t border-gray-100 dark:border-gray-800 my-2"></li>
                                    <li>
                                        <a href="/logout"
                                            class="block py-1 px-4 dark:text-white/70 hover:text-green-600 dark:hover:text-white"><i
                                                class="mdi mdi-logout me-2"></i>Logout</a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="container-fluid relative px-3">
                <div class="layout-specing">
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <a href="/alumni">
                            <span class="mdi mdi-arrow-left-circle"
                                style="font-size: 40px; margin-bottom: 10px; display: block;"></span>
                        </a>
                        <p style="color: black; font-size: 2rem; font-weight: bold; margin-bottom: 0.7rem;">
                            Profil Alumni</p>
                    </div>

                    <div class="grid gap-6">
                        <div class="grid-container">
                            <div class="profile col-span-12 relative rounded-md p-6 overflow-hidden flex flex-col gap-4"
                                style="background-image: linear-gradient(to right, #d4edda, #34d399);">

                                <div>
                                    <p class="text-gray-800 text-xl font-semibold mb-2">
                                        NISN : <span class="font-normal">
                                            <%= alumni.nisn %>
                                        </span>
                                    </p>
                                    <p class="text-gray-800 text-xl font-semibold mb-2">
                                        Nama : <span class="font-normal">
                                            <%= alumni.nama %>
                                        </span>
                                    </p>
                                    <p class="text-gray-800 text-xl font-semibold mb-2">
                                        Jenis Kelamin : <span class="font-normal">
                                            <%= alumni.jenisKelamin %>
                                        </span>
                                    </p>
                                </div>

                                <div class="hidden md:flex" style="gap: 1rem;">
                                    <button class="cursor-pointer editProfilBtn"
                                        style="display: inline-block; background-color: #fff; color: #16a34a; font-weight: 600; padding: 0.5rem 1rem; border-radius: 0.5rem; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.05); transition: background-color 0.3s ease;"
                                        data-id="<%= alumni._id %>" data-nama="<%= alumni.nama %>"
                                        data-email="<%= alumni.email %>" data-nisn="<%= alumni.nisn %>"
                                        data-kelamin="<%= alumni.jenisKelamin %>">
                                        Edit Profil
                                    </button>
                                    <button class="cursor-pointer gantiPasswordBtn"
                                        style="display: inline-block; background-color: #fff; color: #16a34a; font-weight: 600; padding: 0.5rem 1rem; border-radius: 0.5rem; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.05); transition: background-color 0.3s ease;">
                                        Ganti Password
                                    </button>
                                </div>

                                <div class="mt-4 flex flex-col gap-3 md:hidden">
                                    <button class="cursor-pointer w-full editProfilBtn"
                                        style="background-color: #fff; color: #16a34a; font-weight: 600; padding: 0.6rem 1rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.05);"
                                        data-id="<%= alumni._id %>" data-nama="<%= alumni.nama %>"
                                        data-email="<%= alumni.email %>" data-nisn="<%= alumni.nisn %>"
                                        data-kelamin="<%= alumni.jenisKelamin %>">
                                        Edit Profil
                                    </button>
                                    <button class="cursor-pointer w-full gantiPasswordBtn"
                                        style="background-color: #fff; color: #16a34a; font-weight: 600; padding: 0.6rem 1rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.05);">
                                        Ganti Password
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

    </div>

    <!-- modal edit -->
    <div id="modalEditProfil"
        style="display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);">
        <div
            style="background-color: #fefefe; margin: 10% auto; padding: 25px; border: 1px solid #888; width: 80%; max-width: 600px; font-size: 1.1rem; border-radius: 0.7rem;">
            <span id="closeEditProfilModalBtn"
                style="color: #aaa; float: right; font-size: 34px; font-weight: bold; cursor: pointer;">&times;</span>
            <h2 style="font-size: 1.8rem; margin-bottom: 15px;">Edit Profil Alumni</h2>
            <form id="formEditProfil" method="post" action="/alumni/update-profile" style="font-size: 1.1rem;">
                <input type="hidden" id="editProfilId" name="id">

                <div style="margin-bottom: 15px;">
                    <label for="editNisn" style="font-size: 1.2rem;">NISN:</label><br>
                    <input type="text" id="editNisn" name="nisn" disabled
                        style="width: 100%; padding: 0.7rem; margin-top: 5px; margin-bottom: 10px; box-sizing: border-box; font-size: 1.1rem; border: 1px solid #888; border-radius: 0.7rem; background-color: #e9ecef; cursor: not-allowed;"
                        placeholder="NISN">
                </div>

                <div style="margin-bottom: 15px;">
                    <label for="editNama" style="font-size: 1.2rem;">Nama:</label><br>
                    <input type="text" id="editNama" name="nama" required
                        style="width: 100%; padding: 0.7rem; margin-top: 5px; margin-bottom: 10px; box-sizing: border-box; font-size: 1.1rem; border: 1px solid #888; border-radius: 0.7rem;"
                        placeholder="Masukkan nama">
                </div>

                <div style="margin-bottom: 15px;">
                    <label for="editJenisKelamin" style="font-size: 1.2rem;">Jenis Kelamin:</label><br>
                    <select id="editJenisKelamin" name="jenisKelamin" required
                        style="width: 100%; padding: 0.7rem; margin-top: 5px; margin-bottom: 10px; box-sizing: border-box; font-size: 1.1rem; border: 1px solid #888; border-radius: 0.7rem;">
                        <option value="">Pilih Jenis Kelamin</option>
                        <option value="Laki-laki">Laki-laki</option>
                        <option value="Perempuan">Perempuan</option>
                    </select>
                </div>

                <div style="text-align: right;">
                    <button type="submit"
                        style="background-color: #4CAF50; color: white; border: none; padding: 0.7rem 1.2rem; border-radius: 0.7rem; cursor: pointer; font-size: 1.2rem;">Simpan</button>
                    <button type="button" id="batalEditProfilModalBtn"
                        style="background-color: #f44336; color: white; border: none; padding: 0.7rem 1.2rem; border-radius: 0.7rem; cursor: pointer; font-size: 1.2rem; margin-left: 0.5rem;">Batal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- modal ganti password -->
    <div id="modalGantiPassword"
        style="display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);">
        <div
            style="background-color: #fefefe; margin: 10% auto; padding: 25px; border: 1px solid #888; width: 80%; max-width: 600px; font-size: 1.1rem; border-radius: 0.7rem;">
            <span id="closeGantiPasswordModalBtn"
                style="color: #aaa; float: right; font-size: 34px; font-weight: bold; cursor: pointer;">&times;</span>
            <h2 style="font-size: 1.8rem; margin-bottom: 15px;">Ganti Password Alumni</h2>
            <form id="formGantiPassword" method="post" action="/alumni/update-password" style="font-size: 1.1rem;">
                <div style="margin-bottom: 15px;">
                    <label for="oldPassword" style="font-size: 1.2rem;">Password Lama:</label><br>
                    <input type="password" id="oldPassword" name="oldPassword" required
                        style="width: 100%; padding: 0.7rem; margin-top: 5px; margin-bottom: 10px; box-sizing: border-box; font-size: 1.1rem; border: 1px solid #888; border-radius: 0.7rem;"
                        placeholder="Masukkan password lama">
                </div>
                <div style="margin-bottom: 15px;">
                    <label for="newPassword" style="font-size: 1.2rem;">Password Baru:</label><br>
                    <input type="password" id="newPassword" name="newPassword" required
                        style="width: 100%; padding: 0.7rem; margin-top: 5px; margin-bottom: 10px; box-sizing: border-box; font-size: 1.1rem; border: 1px solid #888; border-radius: 0.7rem;"
                        placeholder="Masukkan password baru">
                </div>
                <div style="margin-bottom: 15px;">
                    <label for="confirmNewPassword" style="font-size: 1.2rem;">Konfirmasi Password Baru:</label><br>
                    <input type="password" id="confirmNewPassword" name="confirmNewPassword" required
                        style="width: 100%; padding: 0.7rem; margin-top: 5px; margin-bottom: 10px; box-sizing: border-box; font-size: 1.1rem; border: 1px solid #888; border-radius: 0.7rem;"
                        placeholder="Konfirmasi password baru">
                </div>
                <div style="text-align: right;">
                    <button type="submit"
                        style="background-color: #4CAF50; color: white; border: none; padding: 0.7rem 1.2rem; border-radius: 0.7rem; cursor: pointer; font-size: 1.2rem;">Ganti
                        Password</button>
                    <button type="button" id="batalGantiPasswordModalBtn"
                        style="background-color: #f44336; color: white; border: none; padding: 0.7rem 1.2rem; border-radius: 0.7rem; cursor: pointer; font-size: 1.2rem; margin-left: 0.5rem;">Batal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- alert -->
    <div
        style="position: fixed; top: 5rem; right: 0; left: 0; z-index: 50; display: flex; align-items: center; justify-content: center;">
        <% if (success_msg && success_msg.length> 0) { %>
            <div class="alert-success"
                style="background-color: #4CAF50; color: white; border-radius: 0.375rem; padding: 1rem; margin-bottom: 2.25rem; width: 75%; max-width: 640px; font-size: 1.3rem; line-height: 1.25rem;"
                role="alert">
                <p style="margin: 0;">
                    <%= success_msg %>
                </p>
            </div>
            <% } %>
                <% if (error_msg && error_msg.length> 0) { %>
                    <div class="alert-error"
                        style="background-color: #F44336; color: white; border-radius: 0.375rem; padding: 1rem; margin-bottom: 2.25rem; width: 75%; max-width: 640px; font-size: 1.3rem; line-height: 1.25rem;"
                        role="alert">
                        <p style="margin: 0;">
                            <%= error_msg %>
                        </p>
                    </div>
                    <% } %>
    </div>
    <script src="/../assets/admin/libs/feather-icons/feather.min.js"></script>
    <script src="/../assets/admin/libs/simplebar/simplebar.min.js"></script>
    <script src="/../assets/admin/js/plugins.init.js"></script>
    <script src="/../assets/admin/js/app.js"></script>


    <script>
        const alertSuccess = document.querySelector('.alert-success');
        if (alertSuccess) {
            setTimeout(() => {
                alertSuccess.remove();
            }, 2000);
        }
        const alertError = document.querySelector('.alert-error');
        if (alertError) {
            setTimeout(() => {
                alertError.remove();
            }, 2000);
        }
    </script>

    <!-- modal edit -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const modalEditProfil = document.getElementById('modalEditProfil');
            const closeEditProfilModalBtn = document.getElementById('closeEditProfilModalBtn');
            const batalEditProfilModalBtn = document.getElementById('batalEditProfilModalBtn');
            const editProfilBtns = document.querySelectorAll('.editProfilBtn');

            const editProfilId = document.getElementById('editProfilId');
            const editNisn = document.getElementById('editNisn');
            const editNama = document.getElementById('editNama');
            const editJenisKelamin = document.getElementById('editJenisKelamin'); // ID baru untuk select jenis kelamin

            editProfilBtns.forEach(button => {
                button.addEventListener('click', function () {
                    const alumniId = this.dataset.id;
                    const alumniNisn = this.dataset.nisn;
                    const alumniNama = this.dataset.nama;
                    const alumniJenisKelamin = this.dataset.kelamin;

                    editProfilId.value = alumniId;
                    editNisn.value = alumniNisn;
                    editNama.value = alumniNama;
                    editJenisKelamin.value = alumniJenisKelamin;

                    modalEditProfil.style.display = 'block';
                });
            });

            closeEditProfilModalBtn.addEventListener('click', function () {
                modalEditProfil.style.display = 'none';
            });

            batalEditProfilModalBtn.addEventListener('click', function () {
                modalEditProfil.style.display = 'none';
            });

            window.addEventListener('click', function (event) {
                if (event.target == modalEditProfil) {
                    modalEditProfil.style.display = 'none';
                }
            });
        });
    </script>

    <!-- modal ganti password -->
    <script>
        // Pastikan skrip ini diletakkan setelah elemen HTML modal
        document.addEventListener('DOMContentLoaded', function () {
            const modalGantiPassword = document.getElementById('modalGantiPassword');
            const closeGantiPasswordModalBtn = document.getElementById('closeGantiPasswordModalBtn');
            const batalGantiPasswordModalBtn = document.getElementById('batalGantiPasswordModalBtn');
            const gantiPasswordBtns = document.querySelectorAll('.gantiPasswordBtn'); // Menggunakan querySelectorAll jika ada beberapa tombol

            gantiPasswordBtns.forEach(button => {
                button.addEventListener('click', function () {
                    modalGantiPassword.style.display = 'block';
                });
            });

            closeGantiPasswordModalBtn.addEventListener('click', function () {
                modalGantiPassword.style.display = 'none';
                // Opsional: reset form saat modal ditutup
                document.getElementById('formGantiPassword').reset();
            });

            batalGantiPasswordModalBtn.addEventListener('click', function () {
                modalGantiPassword.style.display = 'none';
                // Opsional: reset form saat modal ditutup
                document.getElementById('formGantiPassword').reset();
            });

            // Menutup modal jika area di luar modal diklik
            window.addEventListener('click', function (event) {
                if (event.target == modalGantiPassword) {
                    modalGantiPassword.style.display = 'none';
                    // Opsional: reset form saat modal ditutup
                    document.getElementById('formGantiPassword').reset();
                }
            });

            // Menambahkan validasi sederhana di sisi klien untuk password baru
            const formGantiPassword = document.getElementById('formGantiPassword');
            const newPasswordInput = document.getElementById('newPassword');
            const confirmNewPasswordInput = document.getElementById('confirmNewPassword');

            formGantiPassword.addEventListener('submit', function (event) {
                if (newPasswordInput.value !== confirmNewPasswordInput.value) {
                    event.preventDefault(); // Mencegah form disubmit
                    alert('Konfirmasi password baru tidak cocok dengan password baru.');
                    // Anda juga bisa menambahkan pesan error yang lebih baik di bawah input
                    confirmNewPasswordInput.focus();
                }
            });
        });
    </script>
</body>

</html>