<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Admin - Profil</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description">
    <meta content="coderthemes" name="author">

    <!-- App favicon -->
    <link rel="shortcut icon" href="../../assets/admin/smk-bp.png">


    <!-- Main Css -->
    <link href="../../assets/admin/libs/simplebar/simplebar.min.css" rel="stylesheet">
    <link href="../../assets/admin/libs/%40mdi/font/css/materialdesignicons.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="../../assets/admin/css/tailwind.min.css">
    <style>
        @media (min-width: 768px) {
            .profile {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
        }
    </style>
</head>

<body>
    <div class="page-wrapper toggled">
        <nav id="sidebar" class="sidebar-wrapper sidebar-dark">
            <div class="sidebar-content">
                <div class="sidebar-brand">
                    <a href="/"><img src="../../assets/admin/images/logo-light.png" alt="" width="200px"></a>
                </div>

                <ul class="sidebar-menu border-t border-white/10" data-simplebar style="height: calc(100% - 70px);">
                    <li>
                        <a href="/admin" style="font-size: 1.4rem;"><i
                                class="mdi mdi-chart-bell-curve-cumulative me-2"></i>Dashboard</a>
                    </li>

                    <li>
                        <a href="/admin/alumni-list" style="font-size: 1.4rem;"><i
                                class="mdi mdi-home-city me-2"></i>Alumni </a>
                    </li>

                    <li>
                        <a href="/admin/berita" style="font-size: 1.4rem;"><i class="mdi mdi-home-heart me-2"></i>Berita
                        </a>
                    </li>

                    <li>
                        <a href="/admin/lowongan" style="font-size: 1.4rem;"><i
                                class="mdi mdi-home-plus me-2"></i>Lowongan </a>
                    </li>

                    <li>
                        <a href="/admin/saran" style="font-size: 1.4rem;"><i
                                class="mdi mdi-chat-outline me-2"></i>Saran</a>
                    </li>
                </ul>
            </div>
        </nav>
        <!-- Start Page Content -->
        <main class="page-content bg-gray-50 dark:bg-slate-800" style="min-height: 100vh;">
            <div class="top-header">
                <div class="header-bar flex justify-between">
                    <div class="flex items-center space-x-1">
                        <a href="#" class="xl:hidden block me-2">
                            <img src="../../assets/admin/images/smk-bp.png" class="md:hidden block" alt="" width="40px">
                            <span class="md:block hidden">
                                <img src="../../assets/admin/images/logo-dark.png" class="inline-block dark:hidden"
                                    alt="" width="200px">
                                <img src="../../assets/admin/images/logo-light.png" class="hidden dark:inline-block"
                                    alt="" width="200px">
                            </span>
                        </a>
                        <a id="close-sidebar"
                            class="size-8 inline-flex items-center justify-center tracking-wide align-middle duration-500 text-[20px] text-center bg-gray-50 dark:bg-slate-800 hover:bg-gray-100 dark:hover:bg-slate-700 border border-black dark:border-gray-800 text-slate-900 dark:text-white rounded-md"
                            href="javascript:void(0)">
                            <i data-feather="menu" class="size-4"></i>
                        </a>
                    </div>

                    <ul class="list-none mb-0 space-x-1">

                        <li class="dropdown inline-block relative">
                            <button data-dropdown-toggle="dropdown" class="dropdown-toggle items-center" type="button">
                                <span
                                    class="size-10 inline-flex items-center justify-center tracking-wide align-middle duration-500 text-[20px] text-center bg-gray-50 dark:bg-slate-800 hover:bg-gray-100 dark:hover:bg-slate-700 border border-black dark:border-gray-800 text-slate-900 dark:text-white rounded-md"><img
                                        src="../../assets/admin/images/profile-icon-light.png" class="rounded-md w-full"
                                        alt="" style="cursor: pointer;"></span>
                            </button>
                            <div class="dropdown-menu absolute end-0 m-0 mt-4 z-10 w-44 rounded-md overflow-hidden bg-white dark:bg-slate-900 shadow-sm dark:shadow-gray-700 hidden"
                                onclick="event.stopPropagation();">
                                <ul class="py-2 text-start">
                                    <li>
                                        <a href="/admin/profile"
                                            class="block py-1 px-4 dark:text-white/70 hover:text-green-600 dark:hover:text-white"><i
                                                class="mdi mdi-account-outline me-2"></i>Profile</a>
                                    </li>
                                    <li class="border-t border-gray-100 dark:border-gray-800 my-2"></li>
                                    <li>
                                        <a href="/logout"
                                            class="block py-1 px-4 dark:text-white/70 hover:text-green-600 dark:hover:text-white"><i
                                                class="mdi mdi-logout me-2"></i>Logout</a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="container-fluid relative px-3">
                <div class="layout-specing">
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <a href="/admin">
                            <span class="mdi mdi-arrow-left-circle"
                                style="font-size: 40px; margin-bottom: 10px; display: block;"></span>
                        </a>
                        <p style="color: black; font-size: 2rem; font-weight: bold; margin-bottom: 0.7rem;">
                            Profil Admin</p>
                    </div>

                    <div class="grid gap-6">
                        <div class="grid-container">
                            <div class="profile col-span-12 relative rounded-md p-6 overflow-hidden flex flex-col gap-4"
                                style="background-image: linear-gradient(to right, #d4edda, #34d399);">

                                <div>
                                    <p class="text-gray-800 text-xl font-semibold mb-2">
                                        Nama : <span class="font-normal">
                                            <%= admin.nama %>
                                        </span>
                                    </p>
                                    <p class="text-gray-800 text-xl font-semibold">
                                        Email : <span class="font-normal">
                                            <%= admin.email || 'Kosong' %>
                                        </span>
                                    </p>
                                </div>

                                <!-- Tombol untuk tampilan desktop (md ke atas) -->
                                <div class="hidden md:flex" style="gap: 1rem;">
                                    <button class="cursor-pointer editProfilBtn"
                                        style="display: inline-block; background-color: #fff; color: #16a34a; font-weight: 600; padding: 0.5rem 1rem; border-radius: 0.5rem; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.05); transition: background-color 0.3s ease;"
                                        data-id="<%= admin._id %>" data-nama="<%= admin.nama %>"
                                        data-email="<%= admin.email %>">
                                        Edit Profil
                                    </button>
                                    <button class="cursor-pointer gantiPasswordBtn"
                                        style="display: inline-block; background-color: #fff; color: #16a34a; font-weight: 600; padding: 0.5rem 1rem; border-radius: 0.5rem; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.05); transition: background-color 0.3s ease;">
                                        Ganti Password
                                    </button>
                                </div>

                                <div class="mt-4 flex flex-col gap-3 md:hidden">
                                    <button class="cursor-pointer w-full editProfilBtn"
                                        style="background-color: #fff; color: #16a34a; font-weight: 600; padding: 0.6rem 1rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.05);"
                                        data-id="<%= admin._id %>" data-nama="<%= admin.nama %>"
                                        data-email="<%= admin.email %>">
                                        Edit Profil
                                    </button>
                                    <button class="cursor-pointer w-full gantiPasswordBtn"
                                        style="background-color: #fff; color: #16a34a; font-weight: 600; padding: 0.6rem 1rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.05);">
                                        Ganti Password
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- modal edit profil -->
        <div id="modalEditProfil"
            style="display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);">
            <div
                style="background-color: #fefefe; margin: 10% auto; padding: 25px; border: 1px solid #888; width: 80%; max-width: 600px; font-size: 1.1rem; border-radius: 0.7rem;">
                <span id="closeEditProfilModalBtn"
                    style="color: #aaa; float: right; font-size: 34px; font-weight: bold; cursor: pointer;">&times;</span>
                <h2 style="font-size: 1.8rem; margin-bottom: 15px;">Edit Profil</h2>
                <form id="formEditProfil" method="post" action="/admin/update-profil" style="font-size: 1.1rem;">
                    <input type="hidden" id="editProfilId" name="id">
                    <div style="margin-bottom: 15px;">
                        <label for="editNama" style="font-size: 1.2rem;">Nama:</label><br>
                        <input type="text" id="editNama" name="nama" required
                            style="width: 100%; padding: 0.7rem; margin-top: 5px; margin-bottom: 10px; box-sizing: border-box; font-size: 1.1rem; border: 1px solid #888; border-radius: 0.7rem;"
                            placeholder="Masukkan nama">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label for="editEmail" style="font-size: 1.2rem;">Email:</label><br>
                        <input type="email" id="editEmail" name="email" required
                            style="width: 100%; padding: 0.7rem; margin-top: 5px; margin-bottom: 10px; box-sizing: border-box; font-size: 1.1rem; border: 1px solid #888; border-radius: 0.7rem;"
                            placeholder="Masukkan email">
                    </div>
                    <div style="text-align: right;">
                        <button type="submit"
                            style="background-color: #4CAF50; color: white; border: none; padding: 0.7rem 1.2rem; border-radius: 0.7rem; cursor: pointer; font-size: 1.2rem;">Simpan</button>
                        <button type="button" id="batalEditProfilModalBtn"
                            style="background-color: #f44336; color: white; border: none; padding: 0.7rem 1.2rem; border-radius: 0.7rem; cursor: pointer; font-size: 1.2rem; margin-left: 0.5rem;">Batal</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- modal ganti password -->
        <div id="modalGantiPassword"
            style="display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);">
            <div
                style="background-color: #fefefe; margin: 10% auto; padding: 25px; border: 1px solid #888; width: 80%; max-width: 600px; font-size: 1.1rem; border-radius: 0.7rem;">
                <span id="closeGantiPasswordModalBtn"
                    style="color: #aaa; float: right; font-size: 34px; font-weight: bold; cursor: pointer;">&times;</span>
                <h2 style="font-size: 1.8rem; margin-bottom: 15px;">Ganti Password</h2>
                <form id="formGantiPassword" method="post" action="/admin/update-password" style="font-size: 1.1rem;">
                    <div style="margin-bottom: 15px;">
                        <label for="oldPassword" style="font-size: 1.2rem;">Password Lama:</label><br>
                        <input type="password" id="oldPassword" name="oldPassword" required
                            style="width: 100%; padding: 0.7rem; margin-top: 5px; margin-bottom: 10px; box-sizing: border-box; font-size: 1.1rem; border: 1px solid #888; border-radius: 0.7rem;"
                            placeholder="Masukkan password lama">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label for="newPassword" style="font-size: 1.2rem;">Password Baru:</label><br>
                        <input type="password" id="newPassword" name="newPassword" required
                            style="width: 100%; padding: 0.7rem; margin-top: 5px; margin-bottom: 10px; box-sizing: border-box; font-size: 1.1rem; border: 1px solid #888; border-radius: 0.7rem;"
                            placeholder="Masukkan password baru">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label for="confirmNewPassword" style="font-size: 1.2rem;">Konfirmasi Password Baru:</label><br>
                        <input type="password" id="confirmNewPassword" name="confirmNewPassword" required
                            style="width: 100%; padding: 0.7rem; margin-top: 5px; margin-bottom: 10px; box-sizing: border-box; font-size: 1.1rem; border: 1px solid #888; border-radius: 0.7rem;"
                            placeholder="Konfirmasi password baru">
                    </div>
                    <div style="text-align: right;">
                        <button type="submit"
                            style="background-color: #4CAF50; color: white; border: none; padding: 0.7rem 1.2rem; border-radius: 0.7rem; cursor: pointer; font-size: 1.2rem;">Ganti
                            Password</button>
                        <button type="button" id="batalGantiPasswordModalBtn"
                            style="background-color: #f44336; color: white; border: none; padding: 0.7rem 1.2rem; border-radius: 0.7rem; cursor: pointer; font-size: 1.2rem; margin-left: 0.5rem;">Batal</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- alert -->
        <div
            style="position: fixed; top: 5rem; right: 0; left: 0; z-index: 50; display: flex; align-items: center; justify-content: center;">
            <% if (success_msg && success_msg.length> 0) { %>
                <div class="alert-success"
                    style="background-color: #4CAF50; color: white; border-radius: 0.375rem; padding: 1rem; margin-bottom: 2.25rem; width: 75%; max-width: 640px; font-size: 1.3rem; line-height: 1.25rem; text-align: center;"
                    role="alert">
                    <p style="margin: 0;">
                        <%= success_msg %>
                    </p>
                </div>
                <% } %>
                    <% if (error_msg && error_msg.length> 0) { %>
                        <div class="alert-error"
                            style="background-color: #F44336; color: white; border-radius: 0.375rem; padding: 1rem; margin-bottom: 2.25rem; width: 75%; max-width: 640px; font-size: 1.3rem; line-height: 1.25rem; text-align: center;"
                            role="alert">
                            <p style="margin: 0;">
                                <%= error_msg %>
                            </p>
                        </div>
                        <% } %>
        </div>
    </div>

    <script src="../../assets/admin/libs/feather-icons/feather.min.js"></script>
    <script src="../../assets/admin/libs/simplebar/simplebar.min.js"></script>
    <script src="../../assets/admin/js/plugins.init.js"></script>
    <script src="../../assets/admin/js/app.js"></script>

    <!-- modal tambah -->

    <script>
        const alertSuccess = document.querySelector('.alert-success');
        if (alertSuccess) {
            setTimeout(() => {
                alertSuccess.remove();
            }, 2000);
        }
        const alertError = document.querySelector('.alert-error');
        if (alertError) {
            setTimeout(() => {
                alertError.remove();
            }, 2000);
        }
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Elemen untuk Modal Edit Profil ---
            // Mengubah querySelector menjadi querySelectorAll karena ada potensi banyak elemen dengan kelas ini
            const editProfilBtns = document.querySelectorAll('.editProfilBtn');
            const modalEditProfil = document.getElementById('modalEditProfil');
            const closeEditProfilModalBtn = document.getElementById('closeEditProfilModalBtn');
            const batalEditProfilModalBtn = document.getElementById('batalEditProfilModalBtn');
            const formEditProfil = document.getElementById('formEditProfil');
            const editNamaInput = document.getElementById('editNama');
            const editEmailInput = document.getElementById('editEmail');
            const editProfilIdInput = document.getElementById('editProfilId'); // Hidden ID input

            // --- Elemen untuk Modal Ganti Password ---
            // Mengubah querySelector menjadi querySelectorAll karena ada potensi banyak elemen dengan kelas ini
            const gantiPasswordBtns = document.querySelectorAll('.gantiPasswordBtn');
            const modalGantiPassword = document.getElementById('modalGantiPassword');
            const closeGantiPasswordModalBtn = document.getElementById('closeGantiPasswordModalBtn');
            const batalGantiPasswordModalBtn = document.getElementById('batalGantiPasswordModalBtn');
            const formGantiPassword = document.getElementById('formGantiPassword');

            // --- Event Listeners untuk Modal Edit Profil ---
            // Melakukan iterasi untuk setiap tombol edit profil
            editProfilBtns.forEach(button => {
                button.addEventListener('click', () => {
                    // Mengisi form dengan data dari data-attributes tombol yang diklik
                    editNamaInput.value = button.dataset.nama || '';
                    editEmailInput.value = button.dataset.email || '';
                    editProfilIdInput.value = button.dataset.id || ''; // Pastikan data-id ada di tombol jika diperlukan

                    modalEditProfil.style.display = 'block';
                });
            });

            if (closeEditProfilModalBtn) {
                closeEditProfilModalBtn.addEventListener('click', () => {
                    modalEditProfil.style.display = 'none';
                });
            }

            if (batalEditProfilModalBtn) {
                batalEditProfilModalBtn.addEventListener('click', () => {
                    modalEditProfil.style.display = 'none';
                });
            }

            // --- Event Listeners untuk Modal Ganti Password ---
            // Melakukan iterasi untuk setiap tombol ganti password
            gantiPasswordBtns.forEach(button => {
                button.addEventListener('click', () => {
                    modalGantiPassword.style.display = 'block';
                    // Opsional: reset form password setiap kali modal dibuka
                    formGantiPassword.reset();
                });
            });

            if (closeGantiPasswordModalBtn) {
                closeGantiPasswordModalBtn.addEventListener('click', () => {
                    modalGantiPassword.style.display = 'none';
                });
            }

            if (batalGantiPasswordModalBtn) {
                batalGantiPasswordModalBtn.addEventListener('click', () => {
                    modalGantiPassword.style.display = 'none';
                });
            }

            // --- Event Listener untuk menutup modal saat klik di luar area modal ---
            window.addEventListener('click', (event) => {
                if (event.target === modalEditProfil) {
                    modalEditProfil.style.display = 'none';
                }
                if (event.target === modalGantiPassword) {
                    modalGantiPassword.style.display = 'none';
                }
            });
        });

    </script>
</body>

</html>